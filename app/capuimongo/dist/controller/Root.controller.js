sap.ui.define(["sap/ui/core/mvc/Controller","cap/ui/mongo/capuimongo/model/formatter","sap/ui/core/Fragment"],function(e,t,o){"use strict";return e.extend("cap.ui.mongo.capuimongo.controller.Root",{formatter:t,onInit:function(){this.oRouter=this.getOwnerComponent().getRouter()},onEmployeePress:function(e){const t=this.getOwnerComponent().getHelper().getNextUIState(1);const{_id:o}=e.getSource().getSelectedContexts()[0].getObject();this.oRouter.navTo("EmpDetail",{layout:t.layout,empId:o})},onCreateEmployee:async function(e){if(!this.oCreateFragment){this.oCreateFragment=await this.loadFragment("CreateEmployee")}this.oCreateFragment.open()},onSaveEmployeeDetails:async function(){const e=this.getView();const t={fName:e.byId("idFNameText").getValue(),lName:e.byId("idlNameText").getValue(),DOB:e.byId("idDOBText").getValue(),email:e.byId("idEmailText").getValue(),phoneNumber:parseInt(e.byId("idPhoneNumberText").getValue()),age:null,address__id:""};const o={street:e.byId("idStreetText").getValue(),city:e.byId("idCityText").getValue(),pincode:parseInt(e.byId("idPinCodeText").getValue()),country:e.byId("idCountryText").getValue(),landmark:e.byId("idLandMarkText").getValue()};const a=await this.postDataToBackend("/Address",o);t.address__id=a;this.postDataToBackend("/EmployeeDetails",t);this.oCreateFragment.close();this.getView().byId("idEmployeeTable").getModel().refresh()},onDialogClose:function(e){e.getSource().close()},loadFragment:async function(e){const t=`cap.ui.mongo.capuimongo.fragments.${e}`;const a=await o.load({name:t,id:this.getView().getId(),controller:this});this.getView().addDependent(a);return a},postDataToBackend:async function(e,t){const o=this.getView().getModel();const a=o.bindList(e);const n=a.create(t);const i=await n.created();if(e==="/Address"){return n.sPath.split("(")[1].split(")")[0].replaceAll("'","")}return i}})});